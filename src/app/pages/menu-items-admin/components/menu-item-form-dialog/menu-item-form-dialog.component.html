<ng-container *transloco="let t">
  <h1 mat-dialog-title>{{t('formDialogTitles.' + (data.menuItem ? 'updateMenuItem' : 'addMenuItem'))}}</h1>
  <div mat-dialog-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex-column">
      <div formGroupName="name">
        <mat-form-field appearance="outline" *ngFor="let lang of availableLanguages">
          <mat-label>{{t('menuItem.name.' + lang)}}</mat-label>
          <input matInput type="text" [formControlName]="lang">
        </mat-form-field>
      </div>
      <div formGroupName="ingredients">
        <mat-form-field appearance="outline" *ngFor="let lang of availableLanguages">
          <mat-label>{{t('menuItem.ingredients.' + lang)}}</mat-label>
          <textarea matInput class="complaint-textarea" cols="30" rows="4" [formControlName]="lang"></textarea>
        </mat-form-field>
      </div>
      <mat-form-field appearance="outline">
        <mat-label>{{t('menuItem.price')}}</mat-label>
        <input class="text-end" matInput type="number" step="0.01" formControlName="price">
        <span matTextSuffix>â‚¬</span>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{t('menuItem.sectionId')}}</mat-label>
        <mat-select formControlName="sectionId">
          <mat-option *ngFor="let section of menuSections$ | async" [value]="section.id">
            {{section.name[translateService.getActiveLang()]}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{t('menuItem.image')}}</mat-label>
        <input matInput type="text" readonly formControlName="imageUrl">
        <button
          *ngIf="fileInput.files ? fileInput.files.length > 0 : false"
          mat-icon-button matIconSuffix
          type="button"
          (click)="discardSelectedImage()"
        >
          <mat-icon>close</mat-icon>
        </button>
        <button mat-icon-button matIconSuffix type="button" (click)="fileInput.click()">
          <mat-icon>image</mat-icon>
        </button>
        <input
          #fileInput
          type="file"
          accept="image/*"
          hidden
          (change)="onImageFileInputChanged(fileInput.files![0])"
        >
      </mat-form-field>
    </form>
    <img *ngIf="data.menuItem?.imageUrl" [src]="data.menuItem!.imageUrl">
  </div>
  <div mat-dialog-actions class="justify-content-around">
    <button mat-raised-button [mat-dialog-close]="null" type="reset">
      {{t('confirmationOptions.cancel')}}
    </button>
    <button mat-raised-button [mat-dialog-close]="form.value" type="submit">
      {{t('confirmationOptions.confirm')}}
    </button>
  </div>
</ng-container>
